name := "semanticcpg"

dependsOn(Projects.codepropertygraph)

libraryDependencies ++= Seq(
  "org.json4s"             %% "json4s-native"            % "3.6.7",
  "org.scala-lang.modules" %% "scala-collection-contrib" % "0.2.1",
  "org.scalatest"          %% "scalatest"                % Versions.scalatest,
)

scalacOptions in (Compile, doc) ++= Seq(
  "-doc-title",
  "semanticcpg apidocs",
  "-doc-version",
  version.value
)

compile / javacOptions ++= Seq("-g") //debug symbols
publishArtifact in (Test, packageBin) := true

// execute tests in root project so that they work in sbt *and* intellij
Test / baseDirectory := (ThisBuild / Test / run / baseDirectory).value

// stage fuzzyc2cpg before test
Test/compile := (Test/compile).dependsOn(Projects.fuzzyc2cpg/stage).value
